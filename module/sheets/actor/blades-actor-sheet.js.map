{"version":3,"sources":["../../ts/sheets/actor/blades-actor-sheet.ts"],"names":[],"mappings":"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","file":"blades-actor-sheet.js","sourcesContent":["\r\nimport C, {BladesActorType, BladesItemType, Attribute, Tag, Action, BladesPhase} from \"../../core/constants.js\";\r\nimport U from \"../../core/utilities.js\";\r\nimport BladesSheet from \"./blades-sheet.js\";\r\nimport BladesActor from \"../../blades-actor.js\";\r\nimport BladesPC from \"../../documents/actors/blades-pc.js\";\r\nimport BladesNPC from \"../../documents/actors/blades-npc.js\";\r\nimport BladesFaction from \"../../documents/actors/blades-faction.js\";\r\nimport BladesCrew from \"../../documents/actors/blades-crew.js\";\r\nimport BladesItem from \"../../blades-item.js\";\r\nimport BladesTrackerSheet from \"../item/blades-tracker-sheet.js\";\r\n// import ConstructorDataType from \"@league-of-foundry-developers/foundry-vtt-types/src/types/helperTypes.js\";\r\n// import type {ItemDataConstructorData} from \"@league-of-foundry-developers/foundry-vtt-types/src/foundry/common/data/data.mjs/itemData.js\";\r\n\r\n\r\nclass BladesActorSheet extends BladesSheet {\r\n\r\n  declare actor: BladesActorOfType<BladesActorType.pc>;\r\n\r\n  static override get defaultOptions() {\r\n    return foundry.utils.mergeObject(super.defaultOptions, {\r\n      classes: [\"eunos-blades\", \"sheet\", \"actor\", \"pc\"],\r\n      template: \"systems/eunos-blades/templates/actor-sheet.hbs\",\r\n      width: 775,\r\n      height: 775,\r\n      tabs: [{navSelector: \".nav-tabs\", contentSelector: \".tab-content\", initial: \"abilities\"}]\r\n    });\r\n  }\r\n\r\n  static Initialize() {\r\n    Actors.registerSheet(\"blades\", BladesActorSheet, {types: [\"pc\"], makeDefault: true});\r\n\r\n    Hooks.on(\"dropActorSheetData\", async (parentActor: BladesActor, _, {uuid}: {uuid: string}) => {\r\n      const doc = await fromUuid(uuid) as BladesDoc|null;\r\n      if (doc instanceof BladesActor) {\r\n        if (parentActor.type === BladesActorType.crew && doc.type === BladesActorType.pc) {\r\n          // Dropping a PC onto a Crew Sheet: Add Crew to PC\r\n          doc.addSubActor(parentActor);\r\n        } else if (parentActor.type === BladesActorType.pc && doc.type === BladesActorType.crew) {\r\n          // Dropping a Crew onto a PC Sheet: Add\r\n          parentActor.addSubActor(doc);\r\n        }\r\n      } // else if (doc instanceof BladesItem) {\r\n      // parentActor.addSubItem(doc);\r\n      // BladesItem.create(doc as {name: string, type: BladesItemType}, {parent: parentActor});\r\n      // return;\r\n      // }\r\n      // return false;\r\n    });\r\n    return loadTemplates([\r\n      \"systems/eunos-blades/templates/items/clock_keeper-sheet.hbs\",\r\n      \"systems/eunos-blades/templates/parts/clock-sheet-row.hbs\"\r\n    ]);\r\n  }\r\n\r\n  override getData() {\r\n    const context = super.getData();\r\n\r\n    const {activeSubItems, activeSubActors} = this.actor as BladesActor;\r\n\r\n    const sheetData: Partial<BladesActorDataOfType<BladesActorType.pc>> = {};\r\n\r\n    //~ Assemble embedded actors and items\r\n    sheetData.preparedItems = Object.assign(\r\n      context.preparedItems ?? {},\r\n      {\r\n        abilities: activeSubItems\r\n          .filter((item): item is BladesItemOfType<BladesItemType.ability> => item.type === BladesItemType.ability)\r\n          .map((item) => {\r\n            //~ Assign dotlines to abilities with usage data\r\n            if (item.system.uses_per_score.max) {\r\n              Object.assign(item, {\r\n                inRuleDotline: {\r\n                  data: item.system.uses_per_score,\r\n                  dotlineLabel: \"Uses\",\r\n                  target: \"item.system.uses_per_score.value\",\r\n                  iconEmpty: \"dot-empty.svg\",\r\n                  iconEmptyHover: \"dot-empty-hover.svg\",\r\n                  iconFull: \"dot-full.svg\",\r\n                  iconFullHover: \"dot-full-hover.svg\"\r\n                }\r\n              });\r\n            }\r\n            return item;\r\n          }),\r\n        background: activeSubItems.find((item) => item.type === BladesItemType.background),\r\n        heritage: activeSubItems.find((item) => item.type === BladesItemType.heritage),\r\n        vice: activeSubItems.find((item) => item.type === BladesItemType.vice),\r\n        loadout: activeSubItems.filter((item): item is BladesItemOfType<BladesItemType.gear> => item.type === BladesItemType.gear).map((item) => {\r\n          // Assign load and usage data to gear\r\n          if (item.system.load) {\r\n            Object.assign(item, {\r\n              numberCircle: item.system.load,\r\n              numberCircleClass: \"item-load\"\r\n            });\r\n          }\r\n          if (item.system.uses_per_score.max) {\r\n            Object.assign(item, {\r\n              inRuleDotline: {\r\n                data: item.system.uses_per_score,\r\n                dotlineLabel: \"Uses\",\r\n                target: \"item.system.uses_per_score.value\",\r\n                iconEmpty: \"dot-empty.svg\",\r\n                iconEmptyHover: \"dot-empty-hover.svg\",\r\n                iconFull: \"dot-full.svg\",\r\n                iconFullHover: \"dot-full-hover.svg\"\r\n              }\r\n            });\r\n          }\r\n          return item;\r\n        }),\r\n        playbook: this.actor.playbook\r\n      }\r\n    ) as BladesActorDataOfType<BladesActorType.pc>[\"preparedItems\"];\r\n\r\n    sheetData.preparedActors = {\r\n      crew: activeSubActors.find((actor): actor is BladesActorOfType<BladesActorType.crew> => actor.type === BladesActorType.crew),\r\n      vice_purveyor: activeSubActors.find((actor): actor is BladesActorOfType<BladesActorType.npc> => actor.hasTag(Tag.NPC.VicePurveyor)),\r\n      acquaintances: activeSubActors.filter((actor): actor is BladesActorOfType<BladesActorType.npc> => actor.hasTag(Tag.NPC.Acquaintance))\r\n    };\r\n\r\n    sheetData.hasVicePurveyor = Boolean(this.actor.playbook?.hasTag(Tag.Gear.Advanced) === false\r\n                                        && activeSubItems.find((item) => item.type === BladesItemType.vice));\r\n\r\n    sheetData.healing_clock = {\r\n      display: \"Healing\",\r\n      target: \"system.healing.value\",\r\n      color: \"white\",\r\n      isVisible: true,\r\n      isNameVisible: false,\r\n      isActive: false,\r\n      ...this.actor.system.healing\r\n    };\r\n\r\n    sheetData.stashData = {\r\n      label: \"Stash:\",\r\n      dotline: {\r\n        data: this.actor.system.stash,\r\n        target: \"system.stash.value\",\r\n        iconEmpty: \"coin-empty.svg\",\r\n        iconEmptyHover: \"coin-empty-hover.svg\",\r\n        iconFull: \"coin-full.svg\",\r\n        iconFullHover: \"coin-full-hover.svg\",\r\n        altIconFull: \"coin-ten.svg\",\r\n        altIconFullHover: \"coin-ten-hover.svg\",\r\n        altIconStep: 10\r\n      }\r\n    };\r\n\r\n    sheetData.stressData = {\r\n      label: this.actor.system.stress.name,\r\n      dotline: {\r\n        data: this.actor.system.stress,\r\n        dotlineClass: this.actor.system.stress.max >= 13 ? \"narrow-stress\" : \"\",\r\n        target: \"system.stress.value\",\r\n        svgKey: \"teeth.tall\",\r\n        svgFull: \"full|half|frame\",\r\n        svgEmpty: \"full|half|frame\"\r\n      }\r\n    };\r\n\r\n    if (BladesActor.IsType(this.actor, BladesActorType.pc)) {\r\n      sheetData.traumaData = {\r\n        label: this.actor.system.trauma.name,\r\n        dotline: {\r\n          data: {value: this.actor.trauma, max: this.actor.system.trauma.max},\r\n          svgKey: \"teeth.short\",\r\n          svgFull: \"full|frame\",\r\n          svgEmpty: \"frame\",\r\n          isLocked: true\r\n        },\r\n        compContainer: {\r\n          \"class\": \"comp-trauma-conditions comp-vertical full-width\",\r\n          \"blocks\": [\r\n            this.actor.traumaList.slice(0, Math.ceil(this.actor.traumaList.length / 2))\r\n              .map((tName) => ({\r\n                checkLabel: tName,\r\n                checkClasses: {\r\n                  active: \"comp-toggle-red\",\r\n                  inactive: \"comp-toggle-grey\"\r\n                },\r\n                checkTarget: `system.trauma.checked.${tName}`,\r\n                checkValue: this.actor.system.trauma.checked[tName] ?? false,\r\n                tooltip: C.TraumaTooltips[tName as KeyOf<typeof C.TraumaTooltips>],\r\n                tooltipClass: \"tooltip-trauma\"\r\n              })),\r\n            this.actor.traumaList.slice(Math.ceil(this.actor.traumaList.length / 2))\r\n              .map((tName) => ({\r\n                checkLabel: tName,\r\n                checkClasses: {\r\n                  active: \"comp-toggle-red\",\r\n                  inactive: \"comp-toggle-grey\"\r\n                },\r\n                checkTarget: `system.trauma.checked.${tName}`,\r\n                checkValue: this.actor.system.trauma.checked[tName] ?? false,\r\n                tooltip: C.TraumaTooltips[tName as KeyOf<typeof C.TraumaTooltips>],\r\n                tooltipClass: \"tooltip-trauma\"\r\n              }))\r\n          ]\r\n        }\r\n      };\r\n    }\r\n\r\n    sheetData.abilityData = {\r\n      dotline: {\r\n        dotlineClass: \"dotline-right dotline-glow\",\r\n        data: {\r\n          value: this.actor.getAvailableAdvancements(\"Ability\"),\r\n          max: this.actor.getAvailableAdvancements(\"Ability\")\r\n        },\r\n        dotlineLabel: \"Available Abilities\",\r\n        isLocked: true,\r\n        iconFull: \"dot-full.svg\"\r\n      }\r\n    };\r\n\r\n    sheetData.loadData = {\r\n      curLoad: this.actor.currentLoad,\r\n      selLoadCount: this.actor.system.loadout.levels[U.lCase(game.i18n.localize(this.actor.system.loadout.selected.toString())) as \"heavy\"|\"normal\"|\"light\"|\"encumbered\"],\r\n      selections: C.Loadout.selections,\r\n      selLoadLevel: this.actor.system.loadout.selected.toString()\r\n    };\r\n\r\n    sheetData.armor = Object.fromEntries(Object.entries(this.actor.system.armor.active)\r\n      .filter(([, isActive]) => isActive)\r\n      .map(([armor]) => [armor, this.actor.system.armor.checked[armor as KeyOf<typeof this.actor.system.armor.checked>]]));\r\n\r\n    sheetData.attributeData = {} as Record<Attribute, {\r\n      tooltip: string,\r\n      actions: Record<Action, ValueMax & {tooltip: string}>\r\n    }>;\r\n    const attrEntries = Object.entries(this.actor.system.attributes) as Array<[Attribute, Record<Action,ValueMax>]>;\r\n    for (const [attribute, attrData] of attrEntries) {\r\n      sheetData.attributeData[attribute] = {\r\n        tooltip: C.AttributeTooltips[attribute],\r\n        actions: {} as Record<Action, ValueMax & {tooltip: string}>\r\n      };\r\n      const actionEntries = Object.entries(attrData) as Array<[Action, ValueMax]>;\r\n      for (const [action, actionData] of actionEntries) {\r\n        sheetData.attributeData[attribute].actions[action] = {\r\n          tooltip: C.ActionTooltips[action],\r\n          value: actionData.value,\r\n          max: BladesTrackerSheet.Get().phase === BladesPhase.CharGen ? 2 : this.actor.system.attributes[attribute][action].max\r\n        };\r\n      }\r\n    }\r\n\r\n    sheetData.gatherInfoTooltip = (new Handlebars.SafeString([\r\n      \"<h2>Gathering Information: Questions to Consider</h2>\",\r\n      \"<ul>\",\r\n      ... Object.values(this.actor.system.gather_info ?? []).map((line) => `<li>${line}</li>`) ?? [],\r\n      \"</ul>\"\r\n    ].join(\"\"))).toString();\r\n\r\n    eLog.checkLog(\"Attribute\", \"[BladesActorSheet] attributeData\", {attributeData: sheetData.attributeData});\r\n\r\n    eLog.checkLog(\"actor\", \"[BladesActorSheet] getData()\", {...context, ...sheetData});\r\n\r\n    return {...context, ...sheetData} as BladesActorSheetData;\r\n  }\r\n\r\n  get activeArmor() {\r\n    return Object.keys(U.objFilter(this.actor.system.armor.active, (val: boolean) => val === true));\r\n  }\r\n  get checkedArmor() {\r\n    return Object.keys(U.objFilter(\r\n      this.actor.system.armor.checked,\r\n      (val: string|number|boolean, key: KeyOf<typeof this.actor.system.armor.checked>) => val === true\r\n        && this.actor.system.armor.active[key] === true\r\n    ));\r\n  }\r\n  get uncheckedArmor() {\r\n    return Object.keys(U.objFilter(\r\n      this.actor.system.armor.active,\r\n      (val: string|number|boolean, key: KeyOf<typeof this.actor.system.armor.active>) => val === true\r\n        && this.actor.system.armor.checked[key] === false\r\n    ));\r\n  }\r\n\r\n  _getHoverArmor(): string|false {\r\n    if (!this.activeArmor.length) { return false }\r\n    if (this.activeArmor.includes(\"heavy\")) {\r\n      return this.checkedArmor.includes(\"heavy\") ? \"light\" : \"heavy\";\r\n    } else if (this.activeArmor.includes(\"light\")) { return \"light\" }\r\n    return \"special\";\r\n  }\r\n\r\n  _getClickArmor(): string|false {\r\n    if (!this.uncheckedArmor.length) { return false }\r\n    if (this.uncheckedArmor.includes(\"heavy\")) { return \"heavy\" }\r\n    if (this.uncheckedArmor.includes(\"light\")) { return \"light\" }\r\n    return \"special\";\r\n  }\r\n\r\n  _getContextMenuArmor(): string|false {\r\n    if (!this.checkedArmor.length) { return false }\r\n    if (this.checkedArmor.includes(\"light\")) { return \"light\" }\r\n    if (this.checkedArmor.includes(\"heavy\")) { return \"heavy\" }\r\n    return \"special\";\r\n  }\r\n\r\n  override async _onAdvanceClick(event: ClickEvent) {\r\n    event.preventDefault();\r\n    super._onAdvanceClick(event);\r\n    const action = $(event.currentTarget).data(\"action\").replace(/^advance-/, \"\");\r\n    if (action in Attribute) {\r\n      this.actor.advanceAttribute(action);\r\n    }\r\n  }\r\n\r\n  override activateListeners(html: JQuery<HTMLElement>) {\r\n\r\n    super.activateListeners(html);\r\n\r\n    //~ Everything below here is only needed if the sheet is editable\r\n    if (!this.options.editable) {return}\r\n\r\n    const self = this;\r\n\r\n    //~ Armor Control\r\n    html.find(\".main-armor-control\").on({\r\n      click: function() {\r\n        const targetArmor = self._getClickArmor();\r\n        if (!targetArmor) { return }\r\n        self.actor.update({[`system.armor.checked.${targetArmor}`]: true});\r\n      },\r\n      contextmenu: function() {\r\n        const targetArmor = self._getContextMenuArmor();\r\n        if (!targetArmor) { return }\r\n        self.actor.update({[`system.armor.checked.${targetArmor}`]: false});\r\n      },\r\n      mouseenter: function() {\r\n        const targetArmor = self._getHoverArmor();\r\n        eLog.log4(\"Mouse Enter\", targetArmor, this, $(this), $(this).next());\r\n        if (!targetArmor) { return }\r\n        $(this).siblings(`.svg-armor.armor-${targetArmor}`).addClass(\"hover-over\");\r\n      },\r\n      mouseleave: function() {\r\n        const targetArmor = self._getHoverArmor();\r\n        if (!targetArmor) { return }\r\n        $(this).siblings(`.svg-armor.armor-${targetArmor}`).removeClass(\"hover-over\");\r\n      }\r\n    });\r\n\r\n    html.find(\".special-armor-control\").on({\r\n      click: function() {\r\n        if (!self.activeArmor.includes(\"special\")) { return }\r\n        self.actor.update({[\"system.armor.checked.special\"]: self.uncheckedArmor.includes(\"special\")});\r\n      },\r\n      contextmenu: function() {\r\n        if (!self.activeArmor.includes(\"special\")) { return }\r\n        self.actor.update({[\"system.armor.checked.special\"]: self.uncheckedArmor.includes(\"special\")});\r\n      },\r\n      mouseenter: function() {\r\n        if (!self.activeArmor.includes(\"special\") || self.activeArmor.length === 1) { return }\r\n        $(this).siblings(\".svg-armor.armor-special\").addClass(\"hover-over\");\r\n      },\r\n      mouseleave: function() {\r\n        if (!self.activeArmor.includes(\"special\") || self.activeArmor.length === 1) { return }\r\n        $(this).siblings(\".svg-armor.armor-special\").removeClass(\"hover-over\");\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n// declare interface BladesActorSheet {\r\n//   get actor(): BladesActor\r\n// }\r\n\r\nexport default BladesActorSheet;"]}
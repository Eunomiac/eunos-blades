{"version":3,"sources":["../../ts/documents/blades-item-proxy.ts"],"names":[],"mappings":"AAAA,OAAO,CAAC,MAAM,sBAAsB,CAAC;AACrC,OAAO,EAAC,cAAc,EAAC,MAAM,sBAAsB,CAAC;AAEpD,OAAO,UAAU,MAAM,mBAAmB,CAAC;AAC3C,OAAO,cAAc,MAAM,4BAA4B,CAAC;AACxD,OAAO,iBAAiB,MAAM,gCAAgC,CAAC;AAC/D,OAAO,eAAe,MAAM,8BAA8B,CAAC;AAC3D,OAAO,WAAW,MAAM,yBAAyB,CAAC;AAClD,wBAAwB;AACxB,MAAM,QAAQ,GAAsD;IAClE,CAAC,cAAc,CAAC,YAAY,CAAC,EAAE,iBAAiB;IAChD,CAAC,cAAc,CAAC,UAAU,CAAC,EAAE,eAAe;IAC5C,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE,cAAc;IACzC,CAAC,cAAc,CAAC,KAAK,CAAC,EAAE,WAAW;CACpC,CAAC;AACF,wBAAwB;AACxB,gEAAgE;AAChE,MAAM,eAAe,GAAG,IAAI,KAAK,CAAC,cAAY,CAAC,EAAE;IACjD,wBAAwB;IACtB,SAAS,EAAE,UAAS,MAAM,EAAE,IAAI;QAC9B,MAAM,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;QACxB,wBAAwB;QACpB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAsB,CAAC,EAAE;YAC1C,OAAO,IAAI,UAAU,CAAC,GAAG,IAAI,CAAC,CAAC;SAChC;QACL,wBAAwB;QACpB,OAAO,IAAI,QAAQ,CAAC,IAAI,CAAC,IAAsB,CAAE,CAAC,GAAG,IAAI,CAAC,CAAC;IAC7D,CAAC;IACH,wBAAwB;IACtB,GAAG,EAAE,UAAS,MAAM,EAAE,IAAI;QACxB,QAAQ,IAAI,EAAE;YACZ,KAAK,QAAQ,CAAC;YACd,KAAK,iBAAiB;gBACpB,OAAO,UACL,IACwE,EACxE,OAAO,GAAG,EAAE;oBAEZ,IAAI,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;wBACnB,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC;qBACtE;oBACX,wBAAwB;oBACd,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAsB,CAAC,EAAE;wBAC1C,OAAO,UAAU,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;qBACzC;oBACX,wBAAwB;oBACd,OAAO,QAAQ,CAAC,IAAI,CAAC,IAAsB,CAAE,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;gBACtE,CAAC,CAAC;YACJ,KAAK,MAAM,CAAC,WAAW;gBACrB,OAAO,UAAS,QAAiB;oBAC/B,OAAO,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,QAAQ,YAAY,CAAC,CAAC,CAAC;gBACpE,CAAC,CAAC;YACJ;gBACE,OAAO,UAAU,CAAC,IAAgC,CAAC,CAAC;SACvD;IACH,CAAC;IACH,wBAAwB;CACvB,CAAC,CAAC;AACH,wBAAwB;AACxB,eAAe,eAAe,CAAC;AAC/B,OAAO,EAAC,UAAU,EAAE,iBAAiB,EAAE,eAAe,EAAE,cAAc,EAAE,WAAW,EAAC,CAAC","file":"blades-item-proxy.js","sourcesContent":["import U from \"../core/utilities.js\";\r\nimport {BladesItemType} from \"../core/constants.js\";\r\nimport type {ItemDataConstructorData} from \"@league-of-foundry-developers/foundry-vtt-types/src/foundry/common/data/data.mjs/itemData.js\";\r\nimport BladesItem from \"../blades-item.js\";\r\nimport BladesLocation from \"./items/blades-location.js\";\r\nimport BladesClockKeeper from \"./items/blades-clock-keeper.js\";\r\nimport BladesGMTracker from \"./items/blades-gm-tracker.js\";\r\nimport BladesScore from \"./items/blades-score.js\";\r\n\r\nconst ItemsMap: Partial<Record<BladesItemType,typeof BladesItem>> = {\r\n  [BladesItemType.clock_keeper]: BladesClockKeeper,\r\n  [BladesItemType.gm_tracker]: BladesGMTracker,\r\n  [BladesItemType.location]: BladesLocation,\r\n  [BladesItemType.score]: BladesScore\r\n};\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-empty-function\r\nconst BladesItemProxy = new Proxy(function() {}, {\r\n\r\n  construct: function(target, args) {\r\n    const [data] = args;\r\n\r\n    if (!ItemsMap[data.type as BladesItemType]) {\r\n      return new BladesItem(...args);\r\n    }\r\n\r\n    return new ItemsMap[data.type as BladesItemType]!(...args);\r\n  },\r\n\r\n  get: function(target, prop) {\r\n    switch (prop) {\r\n      case \"create\":\r\n      case \"createDocuments\":\r\n        return function(\r\n          data: ItemDataConstructorData & { system?: Partial<BladesItemSystem> }\r\n          |Array<ItemDataConstructorData & { system?: Partial<BladesItemSystem> }>,\r\n          options = {}\r\n        ) {\r\n          if (U.isArray(data)) {\r\n            return data.map((i) => CONFIG.Item.documentClass.create(i, options));\r\n          }\r\n\r\n          if (!ItemsMap[data.type as BladesItemType]) {\r\n            return BladesItem.create(data, options);\r\n          }\r\n\r\n          return ItemsMap[data.type as BladesItemType]!.create(data, options);\r\n        };\r\n      case Symbol.hasInstance:\r\n        return function(instance: unknown) {\r\n          return Object.values(ItemsMap).some((i) => instance instanceof i);\r\n        };\r\n      default:\r\n        return BladesItem[prop as KeyOf<typeof BladesItem>];\r\n    }\r\n  }\r\n\r\n});\r\n\r\nexport default BladesItemProxy;\r\nexport {BladesItem, BladesClockKeeper, BladesGMTracker, BladesLocation, BladesScore};"]}
{"version":3,"sources":["../../ts/core/helpers.ts"],"names":[],"mappings":"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","file":"helpers.js","sourcesContent":["// #region ▮▮▮▮▮▮▮ IMPORTS ▮▮▮▮▮▮▮ ~\r\nimport U from \"./utilities.js\";\r\n\r\nimport type {ItemData} from \"@league-of-foundry-developers/foundry-vtt-types/src/foundry/common/data/module.mjs\";\r\nimport type BladesActor from \"../blades-actor.js\";\r\nimport type BladesItem from \"../blades-item.js\";\r\nimport {HbsSvgData, SVGDATA} from \"./constants.js\";\r\nimport type {ItemDataConstructorData} from \"@league-of-foundry-developers/foundry-vtt-types/src/foundry/common/data/data.mjs/itemData.js\";\r\n// #endregion ▮▮▮▮[IMPORTS]▮▮▮▮\r\n\r\n// #region ░░░░░░░[Templates]░░░░ Preload Partials, Components & Overlay Templates ░░░░░░░ ~\r\n/**\r\n * Define a set of template paths to pre-load\r\n * Pre-loaded templates are compiled and cached for fast access when rendering\r\n */\r\nexport async function preloadHandlebarsTemplates() {\r\n  // Define template paths to load\r\n  const templatePaths = [\r\n\r\n    // General Components\r\n    \"systems/eunos-blades/templates/components/toggle-icon.hbs\",\r\n    \"systems/eunos-blades/templates/components/button-icon.hbs\",\r\n    \"systems/eunos-blades/templates/components/dotline.hbs\",\r\n    \"systems/eunos-blades/templates/components/armor.hbs\",\r\n    \"systems/eunos-blades/templates/components/comp.hbs\",\r\n    \"systems/eunos-blades/templates/components/portrait.hbs\",\r\n    \"systems/eunos-blades/templates/components/clock.hbs\",\r\n    \"systems/eunos-blades/templates/components/roll-collab-mod.hbs\",\r\n    \"systems/eunos-blades/templates/components/roll-collab-opposition.hbs\",\r\n    \"systems/eunos-blades/templates/components/slide-out-controls.hbs\",\r\n\r\n    // Partials\r\n    \"systems/eunos-blades/templates/parts/tier-block.hbs\",\r\n    \"systems/eunos-blades/templates/parts/turf-list.hbs\",\r\n    \"systems/eunos-blades/templates/parts/cohort-block.hbs\",\r\n    \"systems/eunos-blades/templates/parts/roll-opposition-creator.hbs\",\r\n    \"systems/eunos-blades/templates/parts/active-effects.hbs\",\r\n    \"systems/eunos-blades/templates/parts/gm-pc-summary.hbs\",\r\n\r\n    // Overlays\r\n    \"systems/eunos-blades/templates/overlays/clock-overlay.hbs\",\r\n    \"systems/eunos-blades/templates/overlays/clock-key.hbs\"\r\n  ];\r\n\r\n  // Load the template parts\r\n  return loadTemplates(templatePaths);\r\n}\r\n// #endregion ░░░░[Preload Templates]░░░░\r\n\r\n// #region ████████ Handlebars: Handlebar Helpers Definitions ████████ ~\r\nconst handlebarHelpers: Record<string,Handlebars.HelperDelegate> = {\r\n  \"randString\": function(param1 = 10) {\r\n    return U.randString(param1);\r\n  },\r\n  \"test\": function(param1: unknown, operator: string, param2: unknown) {\r\n    const stringMap = {\r\n      \"true\": true,\r\n      \"false\": false,\r\n      \"null\": null,\r\n      \"undefined\": undefined\r\n    };\r\n    if ([\"!\", \"not\", \"=??\"].includes(String(param1))) {\r\n      [operator, param1] = [String(param1), operator];\r\n    }\r\n    if (typeof param1 === \"string\" && param1 in stringMap) {\r\n      param1 = stringMap[param1 as keyof typeof stringMap];\r\n    }\r\n    if (typeof param2 === \"string\" && param2 in stringMap) {\r\n      param2 = stringMap[param2 as keyof typeof stringMap];\r\n    }\r\n    switch (operator) {\r\n      case \"!\": case \"not\": { return !param1 }\r\n      case \"=??\": { return [undefined, null].includes(param1 as any) }\r\n      case \"&&\": { return param1 && param2 }\r\n      case \"||\": { return param1 || param2 }\r\n      case \"==\": { return param1 == param2 } // eslint-disable-line eqeqeq\r\n      case \"===\": { return param1 === param2 }\r\n      case \"!=\": { return param1 != param2 } // eslint-disable-line eqeqeq\r\n      case \"!==\": { return param1 !== param2 }\r\n      case \">\": { return typeof param1 === \"number\" && typeof param2 === \"number\" && param1 > param2 }\r\n      case \"<\": { return typeof param1 === \"number\" && typeof param2 === \"number\" && param1 < param2 }\r\n      case \">=\": { return typeof param1 === \"number\" && typeof param2 === \"number\" && param1 >= param2 }\r\n      case \"<=\": { return typeof param1 === \"number\" && typeof param2 === \"number\" && param1 <= param2 }\r\n      case \"??\": { return param1 ?? param2 }\r\n      case \"includes\": { return Array.isArray(param1) && param1.includes(param2) }\r\n      case \"in\": {\r\n        if (Array.isArray(param2)) {\r\n          return param2.includes(param1);\r\n        }\r\n        if (U.isList(param2) && (typeof param1 === \"number\" || typeof param1 === \"string\")) {\r\n          return param1 in param2;\r\n        }\r\n        if (typeof param2 === \"string\") {\r\n          return new RegExp(String(param1), \"gu\").test(String(param2));\r\n        }\r\n        return false;\r\n      }\r\n      default: { return false }\r\n    }\r\n  },\r\n  \"calc\": function(...params: unknown[]) {\r\n    const calcs: Record<string, (...args: Array<number|string>) => number|string> = {\r\n      \"+\": (p1, p2) => U.pInt(p1) + U.pInt(p2),\r\n      \"-\": (p1, p2) => U.pInt(p1) - U.pInt(p2),\r\n      \"*\": (p1, p2) => U.pInt(p1) * U.pInt(p2),\r\n      \"/\": (p1, p2) => U.pInt(p1) / U.pInt(p2),\r\n      \"%\": (p1, p2) => U.pInt(p1) % U.pInt(p2),\r\n      \"max\": (p1, p2) => Math.max(U.pInt(p1), U.pInt(p2)),\r\n      \"min\": (p1, p2) => Math.min(U.pInt(p1), U.pInt(p2)),\r\n      \"ceil\": (p1) => Math.ceil(U.pFloat(p1)),\r\n      \"floor\": (p1) => Math.floor(U.pFloat(p1))\r\n    };\r\n    const [param1, operator, param2] = typeof params[0] === \"string\" && params[0] in calcs\r\n      ? [params[1], params[0]]\r\n      : params;\r\n    return calcs[operator as KeyOf<typeof calcs>](param1 as string|number, param2 as string|number);\r\n  },\r\n  \"isIn\": function() {\r\n    const [testStr, ...contents] = arguments;\r\n    return contents.includes(testStr);\r\n  },\r\n  \"case\": function(mode: \"upper\" | \"lower\" | \"sentence\" | \"title\", str: string) {\r\n    // return U[`${mode.charAt(0)}Case`](str);\r\n    switch (mode) {\r\n      case \"upper\": return U.uCase(str);\r\n      case \"lower\": return U.lCase(str);\r\n      case \"sentence\": return U.sCase(str);\r\n      case \"title\": return U.tCase(str);\r\n      default: return str;\r\n    }\r\n  },\r\n  \"count\": function(param: unknown): number {\r\n    if (Array.isArray(param) || U.isList(param)) {\r\n      return Object.values(param).filter((val: unknown) => val !== null && val !== undefined).length;\r\n    } else if (typeof param === \"string\") {\r\n      return param.length;\r\n    }\r\n    return param ? 1 : 0;\r\n  },\r\n  // For loop: {{#for [from = 0, to, stepSize = 1]}}<html content, this = index>{{/for}}\r\n  \"forloop\": (...args) => {\r\n    const options = args.pop();\r\n    let [from, to, stepSize] = args;\r\n    from = U.pInt(from);\r\n    to = U.pInt(to);\r\n    stepSize = U.pInt(stepSize) || 1;\r\n    if (from > to) { return \"\" }\r\n    let html = \"\";\r\n    for (let i = parseInt(from || 0); i <= parseInt(to || 0); i++) {\r\n      html += options.fn(i);\r\n    }\r\n    return html;\r\n  },\r\n  \"signNum\": function(num: number) {\r\n    return U.signNum(num);\r\n  },\r\n  \"areEmpty\": function(...args) {\r\n    args.pop();\r\n    return !Object.values(args).flat().join(\"\");\r\n  },\r\n  \"compileSvg\": function(...args): string {\r\n    const [svgDotKey, svgPaths]: [string, string] = args as [string, string];\r\n    const svgData = getProperty(SVGDATA, svgDotKey) as HbsSvgData|undefined;\r\n    if (!svgData) { return \"\" }\r\n    const {viewBox, paths} = svgData;\r\n    return [\r\n      `<svg viewBox=\"${viewBox}\">`,\r\n      ...svgPaths\r\n        .split(\"|\")\r\n        .map((path) => `<path class=\"${path}\" d=\"${paths[path] ?? \"\"}\" />`),\r\n      \"</svg>\"\r\n    ].join(\"\\n\");\r\n  },\r\n  \"eLog\": function(...args) {\r\n    args.pop();\r\n    let dbLevel = 5;\r\n    if ([0,1,2,3,4,5].includes(args[0])) {\r\n      dbLevel = args.shift();\r\n    }\r\n    eLog.hbsLog(...args, dbLevel);\r\n  },\r\n  // Does the name of this turf block represent a standard 'Turf' claim?\r\n  \"isTurfBlock\": (name: string): boolean => U.fuzzyMatch(name, \"Turf\"),\r\n  // Which other connection does this connector overlap with?\r\n  \"getConnectorPartner\": (index: number|string, direction: \"right\"|\"left\"|\"top\"|\"bottom\"): string|null => {\r\n    index = parseInt(`${index}`);\r\n    const partners: Record<number, Record<string,number>> = {\r\n      1: {right: 2, bottom: 6},\r\n      2: {left: 1, right: 3, bottom: 7},\r\n      3: {left: 2, right: 4, bottom: 8},\r\n      4: {left: 3, right: 5, bottom: 9},\r\n      5: {left: 4, bottom: 10},\r\n      6: {top: 1, right: 7, bottom: 11},\r\n      7: {top: 2, left: 6, right: 8, bottom: 12},\r\n      8: {top: 3, left: 7, right: 9, bottom: 13},\r\n      9: {top: 4, left: 8, right: 10, bottom: 14},\r\n      10: {top: 5, left: 9, bottom: 15},\r\n      11: {top: 6, right: 12},\r\n      12: {top: 7, left: 11, right: 13},\r\n      13: {top: 8, left: 12, right: 14},\r\n      14: {top: 9, left: 13, right: 15},\r\n      15: {top: 10, left: 14}\r\n    };\r\n    const partnerDir = {left: \"right\", right: \"left\", top: \"bottom\", bottom: \"top\"}[direction];\r\n    const partnerNum = partners[index as keyof typeof partners][direction] ?? 0;\r\n    if (partnerNum) { return `${partnerNum}-${partnerDir}` }\r\n    return null;\r\n  },\r\n  // Is the value Turf side.\r\n  \"isTurfOnEdge\": (index: number|string, direction: string): boolean => {\r\n    index = parseInt(`${index}`);\r\n    const edges: Record<number, string[]> = {\r\n      1: [\"top\", \"left\"],\r\n      2: [\"top\"],\r\n      3: [\"top\"],\r\n      4: [\"top\"],\r\n      5: [\"top\", \"right\"],\r\n      6: [\"left\"],\r\n      7: [],\r\n      8: [],\r\n      9: [],\r\n      10: [\"right\"],\r\n      11: [\"left\", \"bottom\"],\r\n      12: [\"bottom\"],\r\n      13: [\"bottom\"],\r\n      14: [\"bottom\"],\r\n      15: [\"right\", \"bottom\"]\r\n    };\r\n    if (!(index in edges)) { return true }\r\n    return edges[index as keyof typeof edges].includes(direction);\r\n  },\r\n  // Multiboxes\r\n  \"multiboxes\": function(selected, options) {\r\n    let html = options.fn(this);\r\n    selected = [selected].flat(1);\r\n\r\n    selected.forEach((selected_value: boolean|string) => {\r\n      if (selected_value !== false) {\r\n        const escapedValue = RegExp.escape(Handlebars.escapeExpression(String(selected_value)));\r\n        const rgx = new RegExp(' value=\\\"' + escapedValue + '\\\"');\r\n        html = html.replace(rgx, \"$& checked=\\\"checked\\\"\");\r\n      }\r\n    });\r\n\r\n    return html;\r\n  },\r\n  // NotEquals handlebar.\r\n  \"noteq\": (a, b, options) => (a !== b ? options.fn(this) : \"\"),\r\n  // ReputationTurf handlebar.\r\n  \"repturf\": (turfs_amount, options) => {\r\n    let html = options.fn(this),\r\n        turfs_amount_int = parseInt(turfs_amount);\r\n\r\n    // Can't be more than 6.\r\n    if (turfs_amount_int > 6) {\r\n      turfs_amount_int = 6;\r\n    }\r\n\r\n    for (let i = 13 - turfs_amount_int; i <= 12; i++) {\r\n      const rgx = new RegExp(' value=\\\"' + i + '\\\"');\r\n      html = html.replace(rgx, \"$& disabled=\\\"disabled\\\"\");\r\n    }\r\n\r\n    return html;\r\n  },\r\n  \"crew_vault_coins\": (max_coins, options) => {\r\n    let html = options.fn(this);\r\n    for (let i = 1; i <= max_coins; i++) {\r\n      html += \"<input type=\\\"radio\\\" id=\\\"crew-coins-vault-\" + i + \"\\\" name=\\\"system.vault.value\\\" value=\\\"\" + i + \"\\\"><label for=\\\"crew-coins-vault-\" + i + \"\\\"></label>\";\r\n    }\r\n    return html;\r\n  },\r\n  \"crew_experience\": (actor, options) => {\r\n    let html = options.fn(this);\r\n    for (let i = 1; i <= 10; i++) {\r\n      html += `<input type=\"radio\" id=\"crew-${actor._id}-experience-${i}\" name=\"system.experience\" value=\"${i}\" dtype=\"Radio\"><label for=\"crew-${actor._id}-experience-${i}\"></label>`;\r\n    }\r\n    return html;\r\n  },\r\n  // Enrich the HTML replace /n with <br>\r\n  \"html\": (options) => {\r\n    const text = options.hash.text.replace(/\\n/g, \"<br />\");\r\n    return new Handlebars.SafeString(text);\r\n  },\r\n  // \"N Times\" loop for handlebars.\r\n  //  Block is executed N times starting from n=1.\r\n  //\r\n  // Usage:\r\n  // {{#times_from_1 10}}\r\n  //   <span>{{this}}</span>\r\n  // {{/times_from_1}}\r\n  \"times_from_1\": (n, block) => {\r\n    n = parseInt(n);\r\n    let accum = \"\";\r\n    for (let i = 1; i <= n; ++i) {\r\n      accum += block.fn(i);\r\n    }\r\n    return accum;\r\n  },\r\n  // \"N Times\" loop for handlebars.\r\n  //  Block is executed N times starting from n=0.\r\n  //\r\n  // Usage:\r\n  // {{#times_from_0 10}}\r\n  //   <span>{{this}}</span>\r\n  // {{/times_from_0}}\r\n  \"times_from_0\": (n, block) => {\r\n    n = parseInt(n);\r\n    let accum = \"\";\r\n    for (let i = 0; i <= n; ++i) {\r\n      accum += block.fn(i);\r\n    }\r\n    return accum;\r\n  },\r\n  // Concat helper\r\n  // Usage: (concat 'first 'second')\r\n  \"concat\": function() {\r\n    let outStr = \"\";\r\n    for(const arg in arguments){\r\n      if(typeof arguments[arg]!==\"object\"){\r\n        outStr += arguments[arg];\r\n      }\r\n    }\r\n    return outStr;\r\n  },\r\n  /**\r\n   * Takes label from Selected option instead of just plain value.\r\n   */\r\n  \"selectOptionsWithLabel\": (choices: any[], options) => {\r\n    const localize = options.hash.localize ?? false;\r\n    let selected = options.hash.selected ?? null;\r\n    const blank = options.hash.blank || null;\r\n    selected = selected instanceof Array ? selected.map(String) : [String(selected)];\r\n\r\n    // Create an option\r\n    const option = (key: string, object: Record<string,any>) => {\r\n      if ( localize ) {object.label = game.i18n.localize(object.label)}\r\n      const isSelected = selected.includes(key);\r\n      html += `<option value=\"${key}\" ${isSelected ? \"selected\" : \"\"}>${object.label}</option>`;\r\n    };\r\n\r\n    // Create the options\r\n    let html = \"\";\r\n    if ( blank ) {option(\"\", blank)}\r\n    Object.entries(choices).forEach(e => option(...e));\r\n\r\n    return new Handlebars.SafeString(html);\r\n  }\r\n  /**\r\n   * Create appropriate Blades clock\r\n   */\r\n  // \"blades-clock\": (parameter_name, type, current_value, uniq_id) => {\r\n  //   let html = \"\";\r\n  //   if (current_value === null || current_value === \"null\") {\r\n  //     current_value = 0;\r\n  //   }\r\n  //   if (parseInt(current_value) > parseInt(type)) {\r\n  //     current_value = type;\r\n  //   }\r\n\r\n  //   // Label for 0\r\n  //   html += `<label class=\"clock-zero-label\" for=\"clock-0-${uniq_id}}\"><i class=\"fab fa-creative-commons-zero nullifier\"></i></label>`;\r\n  //   html += `<div id=\"blades-clock-${uniq_id}\" class=\"blades-clock clock-${type} clock-${type}-${current_value}\" style=\"background-image:url('systems/eunos-blades/assets/progressclocks-svg/Progress Clock ${type}-${current_value}.svg');\">`;\r\n  //   const zero_checked = (parseInt(current_value) === 0) ? 'checked=\"checked\"' : \"\";\r\n  //   html += `<input type=\"radio\" value=\"0\" id=\"clock-0-${uniq_id}}\" name=\"${parameter_name}\" ${zero_checked}>`;\r\n\r\n  //   for (let i = 1; i <= parseInt(type); i++) {\r\n  //     const checked = (parseInt(current_value) === i) ? 'checked=\"checked\"' : \"\";\r\n  //     html += `\r\n  //       <input type=\"radio\" value=\"${i}\" id=\"clock-${i}-${uniq_id}\" name=\"${parameter_name}\" ${checked}>\r\n  //       <label for=\"clock-${i}-${uniq_id}\"></label>\r\n  //     `;\r\n  //   }\r\n\r\n  //   html += \"</div>\";\r\n  //   return html;\r\n  // }\r\n};\r\n\r\nhandlebarHelpers.eLog1 = function(...args) { handlebarHelpers.eLog(...[1, ...args.slice(0, 7)]) };\r\nhandlebarHelpers.eLog2 = function(...args) { handlebarHelpers.eLog(...[2, ...args.slice(0, 7)]) };\r\nhandlebarHelpers.eLog3 = function(...args) { handlebarHelpers.eLog(...[3, ...args.slice(0, 7)]) };\r\nhandlebarHelpers.eLog4 = function(...args) { handlebarHelpers.eLog(...[4, ...args.slice(0, 7)]) };\r\nhandlebarHelpers.eLog5 = function(...args) { handlebarHelpers.eLog(...[5, ...args.slice(0, 7)]) };\r\n\r\nObject.assign(handlebarHelpers);\r\n\r\nexport function registerHandlebarHelpers() {\r\n  Object.entries(handlebarHelpers).forEach(([name, func]) => Handlebars.registerHelper(name, func));\r\n}\r\n// #endregion ▄▄▄▄▄ Handlebars ▄▄▄▄▄"]}
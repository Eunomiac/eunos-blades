{"name":"Curtain Animation - City of Knives","type":"script","scope":"global","command":"const text = 'You return from the job to celebrate, mourn or regret.\\nDOWNTIME BEGINS.';\n                    const img = 'systems/eunos-blades/assets/icons/Icon.1_48.png';\n                    const newSceneData = undefined;\n                    return game.modules.get('curtain-animations').api.pushAnimation({ text, img, newSceneData });","author":"c65jKnqbAlyCYTch","img":"systems/eunos-blades/assets/icons/Icon.2_81.png","folder":null,"sort":0,"ownership":{"default":0,"c65jKnqbAlyCYTch":3},"flags":{},"_stats":{"systemId":"eunos-blades","systemVersion":"0.1","coreVersion":"10.286","createdTime":1664704929331,"modifiedTime":1664705181458,"lastModifiedBy":"c65jKnqbAlyCYTch"},"_id":"8NxIuvS9yXEGefHo"}
{"name":"Update Weather","type":"script","author":"c65jKnqbAlyCYTch","img":"https://assets.forge-vtt.com/bazaar/core/icons/svg/clockwork.svg","scope":"global","command":"Hooks.call(\"fxmaster.updateParticleEffects\", [\n  {\n    type: \"clouds\",\n    options: {\n      density: 0.03,\n      speed: 1,\n      scale: 1,\n      tint: {value: \"#FF0000FF\", apply: true},\n      direction: 50\n    }\n  }\n]);","folder":null,"sort":0,"flags":{"core":{"sourceId":"Compendium.fxmaster.fxmaster.Gx6a4ONkHSXmO9Sj"}},"ownership":{"default":0,"c65jKnqbAlyCYTch":3},"_stats":{"systemId":"blades-in-the-dark","systemVersion":"4.3","coreVersion":"10.286","createdTime":1664019017491,"modifiedTime":1664019017491,"lastModifiedBy":"c65jKnqbAlyCYTch"},"_id":"8o2GQ3GpsnNLyIdT"}
{"name":"New Macro","type":"chat","scope":"global","author":"c65jKnqbAlyCYTch","img":"icons/svg/dice-target.svg","command":"/roll 2d6","folder":null,"sort":0,"ownership":{"default":0,"c65jKnqbAlyCYTch":3},"flags":{},"_stats":{"systemId":"eunos-blades","systemVersion":"0.1","coreVersion":"10.286","createdTime":1664275002719,"modifiedTime":1664275040816,"lastModifiedBy":"c65jKnqbAlyCYTch"},"_id":"9P1xzJQKKFYd3Bv7"}
{"name":"Cast Spell","type":"script","author":"c65jKnqbAlyCYTch","img":"https://assets.forge-vtt.com/bazaar/core/icons/svg/sun.svg","scope":"global","command":"function castSpell(effect) {\n  const tokens = canvas.tokens.controlled;\n  if (tokens.length == 0) {\n    return ui.notifications.error(\"Please select a token\");\n  }\n  game.user.targets.forEach((i, t) => {\n    canvas.specials.drawSpecialToward(effect, tokens[0], t);\n  });\n}\n\ncastSpell({\n  file: \"modules/fxmaster/assets/special-effects/jinker/dragonBornBlack-CopperAcid30x5Line.webm\",\n  anchor: {\n    x: -.08,\n    y: 0.5\n  },\n  speed: 0,\n  angle: 0,\n  scale: {\n    x: 1.0,\n    y: 1.0\n  }\n});","folder":null,"sort":0,"flags":{"core":{"sourceId":"Compendium.fxmaster.fxmaster.GV3Vso2az4INrCeo"}},"ownership":{"default":0,"c65jKnqbAlyCYTch":3},"_stats":{"systemId":"blades-in-the-dark","systemVersion":"4.3","coreVersion":"10.286","createdTime":1664019021645,"modifiedTime":1664019021645,"lastModifiedBy":"c65jKnqbAlyCYTch"},"_id":"Abwoc0r9csnRFfcq"}
{"name":"Play Video","type":"script","author":"c65jKnqbAlyCYTch","img":"https://assets.forge-vtt.com/bazaar/core/icons/svg/video.svg","scope":"global","command":"const data = {\n  file: \"modules/fxmaster/assets/special-effects/fxmaster/smoke-bomb.webm\",\n  position: {\n    x: 1000,\n    y: 1000\n  },\n  anchor: {\n   x: 0.5,\n   y: 0.5\n  },\n  angle: 0,\n  scale: {\n    x: 2.5,\n    y: 10\n  }\n}\ncanvas.specials.playVideo(data);\ngame.socket.emit('fxmaster', data);","folder":null,"sort":0,"flags":{"core":{"sourceId":"Compendium.fxmaster.fxmaster.A6jqMnd60ivIPBoI"}},"ownership":{"default":0,"c65jKnqbAlyCYTch":3},"_stats":{"systemId":"blades-in-the-dark","systemVersion":"4.3","coreVersion":"10.286","createdTime":1664019013352,"modifiedTime":1664019013352,"lastModifiedBy":"c65jKnqbAlyCYTch"},"_id":"DbGY4dU4Rde9geFR"}
{"name":"Switch Weather","type":"script","author":"c65jKnqbAlyCYTch","img":"https://assets.forge-vtt.com/bazaar/core/icons/svg/waterfall.svg","scope":"global","command":"Hooks.call(\"fxmaster.switchParticleEffect\", {\n  name: \"myWeatherID\",\n  type: \"fog\",\n  options: {\n    density: 0.5\n  }\n});","folder":null,"sort":0,"flags":{"core":{"sourceId":"Compendium.fxmaster.fxmaster.ftoNC6DqcQGQOAOp"}},"ownership":{"default":0,"c65jKnqbAlyCYTch":3},"_stats":{"systemId":"blades-in-the-dark","systemVersion":"4.3","coreVersion":"10.286","createdTime":1664019015421,"modifiedTime":1664019104995,"lastModifiedBy":"c65jKnqbAlyCYTch"},"_id":"J121B8ZPx8cCDvqn"}
{"type":"script","name":"Apply City Weather","command":"Hooks.call('fxmaster.updateParticleEffects', [ \n  { \"type\":\"raintop\",\n    \"options\": { \n      \"scale\":1, \"speed\":1, \"lifetime\":1,\n      \"density\":0.3, \"tint\": {\"apply\":false,\"value\":\"#ffffff\"}\n    }},\n  { \"type\":\"crows\",\n    \"options\": {\n      \"scale\":2, \"speed\":1, \"lifetime\":3,\n      \"density\":0.001, \"tint\":{\"apply\":false,\"value\":\"#ffffff\"}\n    }}\n]);\n\nFXMASTER.filters.setFilters([\n  { \"type\": \"color\",\n    \"options\": {\n      \"color\": {\"apply\":false,\"value\":\"#ffffff\"},\n      \"saturation\":1, \"contrast\":1, \"brightness\":1, \"gamma\":1\n    }},\n  { \"type\":\"lightning\",\n    \"options\": {\n      \"frequency\": 1500,\n      \"spark_duration\": 370,\n      \"brightness\": 2\n    }},\n  { \"type\":\"fog\",\n    \"options\": {\n      \"dimensions\":1, \"speed\":5,\n      \"density\":0.15, \"color\": {\"apply\":false,\"value\":\"#000000\"}\n    }}\n]);","img":"icons/svg/windmill.svg","author":"c65jKnqbAlyCYTch","scope":"global","folder":null,"sort":0,"ownership":{"default":0,"c65jKnqbAlyCYTch":3},"flags":{},"_stats":{"systemId":"blades-in-the-dark","systemVersion":"4.3","coreVersion":"10.286","createdTime":1664019725959,"modifiedTime":1664035506542,"lastModifiedBy":"c65jKnqbAlyCYTch"},"_id":"LuMBp6Qhny9GLIQO"}
{"name":"Narrate","type":"script","sort":100001,"flags":{"core":{"sourceId":"Compendium.narrator-tools.narrator-macros.qSMtVloC2rqjrfkL"}},"scope":"global","command":"/*\r\nThis macro creates a button wich reads the following paragraph as a narration (/narrate).\r\n*/\r\n\r\ntry {\r\n\tvar macroName = event.srcElement.closest('button,a')?.textContent.trim(),\r\n        macroText = event.srcElement.parentElement.innerText.trim().replace(macroName,'').trim();\r\n        if (macroText && event.srcElement.className == 'entity-link') {\r\n                NarratorTools.chatMessage.narrate(macroText);\r\n        }\r\n}\r\ncatch(err) {\r\n\tconsole.error(err, \"Macro Narrate: failed to catch narration.\");\r\n}","author":"c65jKnqbAlyCYTch","img":"icons/svg/dice-target.svg","ownership":{"default":0,"AoaY7Qm0EqEvkIJr":3,"c65jKnqbAlyCYTch":3},"folder":null,"_stats":{"systemId":"eunos-blades","systemVersion":"0.1","coreVersion":"10.286","createdTime":1664279814326,"modifiedTime":1664279814326,"lastModifiedBy":"c65jKnqbAlyCYTch"},"_id":"NrOGUaBVGHpUlws9"}
{"name":"Duskvol Weather","type":"script","scope":"global","author":"c65jKnqbAlyCYTch","img":"systems/eunos-blades/assets/icons/Icon.2_99.png","command":"Hooks.call(\"fxmaster.updateParticleEffects\", [\n\t\t\t{\n\t\t\t\ttype: \"raintop\",\n\t\t\t\toptions: {\n\t\t\t\t\tscale: 1, speed: 1, lifetime: 1, density: 0.3,\n\t\t\t\t\ttint: {apply: false, value: \"#ffffff\"}\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\ttype: \"crows\",\n\t\t\t\toptions: {\n\t\t\t\t\tscale: 3, speed: 3, lifetime: 2, density: 0.0003,\n\t\t\t\t\ttint: {apply: false, value: \"#ffffff\"}\n\t\t\t\t}\n\t\t\t}\n\t\t]);\n\t\t// @ts-expect-error MIGRATION PAINS\n\t\tFXMASTER.filters.setFilters([\n\t\t\t{\n\t\t\t\ttype: \"fog\",\n\t\t\t\toptions:\n\t\t\t\t\t{\n\t\t\t\t\t\tdimensions: 1, speed: 5, density: 0.15,\n\t\t\t\t\t\tcolor: {apply: false, value: \"#ffffff\"}\n\t\t\t\t\t}\n\t\t\t}, {\n\t\t\t\ttype: \"lightning\",\n\t\t\t\toptions: {\n\t\t\t\t\tfrequency: 5500, spark_duration: 700, brightness: 2\n\t\t\t\t}\n\t\t\t}, /*{\n\t\t\t\ttype: \"bloom\",\n\t\t\t\toptions: {\n\t\t\t\t\tblur: 2, bloomScale: 0.5, threshold: 0.5\n\t\t\t\t}\n\t\t\t}*/\n\t\t]);","folder":null,"sort":0,"ownership":{"default":0,"c65jKnqbAlyCYTch":3},"flags":{},"_stats":{"systemId":"eunos-blades","systemVersion":"0.1","coreVersion":"10.286","createdTime":1664549258450,"modifiedTime":1664705456951,"lastModifiedBy":"c65jKnqbAlyCYTch"},"_id":"PFxLJucLm1wpobln"}
{"type":"script","name":"Particle & Filter Effects","command":"Hooks.call('fxmaster.updateParticleEffects', [{\"type\":\"fog\",\"options\":{\"scale\":2.8,\"speed\":1,\"lifetime\":1,\"density\":0.01,\"tint\":{\"apply\":false,\"value\":\"#ffffff\"}}},{\"type\":\"rain\",\"options\":{\"scale\":1,\"direction\":75,\"speed\":1,\"lifetime\":1,\"density\":0.5,\"tint\":{\"apply\":false,\"value\":\"#ffffff\"}}},{\"type\":\"crows\",\"options\":{\"scale\":3,\"speed\":1,\"lifetime\":1,\"density\":0.001,\"tint\":{\"apply\":false,\"value\":\"#ffffff\"}}}]);\nFXMASTER.filters.setFilters([{\"type\":\"lightning\",\"options\":{\"frequency\":2000,\"spark_duration\":300,\"brightness\":2.7}}]);","img":"icons/svg/windmill.svg","author":"c65jKnqbAlyCYTch","scope":"global","folder":null,"sort":0,"ownership":{"default":0,"c65jKnqbAlyCYTch":3},"flags":{},"_stats":{"systemId":"eunos-blades","systemVersion":"0.1","coreVersion":"10.286","createdTime":1664281899507,"modifiedTime":1664281899507,"lastModifiedBy":"c65jKnqbAlyCYTch"},"_id":"eEcBMx0WDK87MdD3"}
{"type":"script","name":"Particle & Filter Effects","command":"Hooks.call('fxmaster.updateParticleEffects', [{\"type\":\"raintop\",\"options\":{\"scale\":1,\"speed\":1,\"lifetime\":1,\"density\":0.3,\"tint\":{\"apply\":false,\"value\":\"#ffffff\"}}},{\"type\":\"crows\",\"options\":{\"scale\":2,\"speed\":1,\"lifetime\":3,\"density\":0.001,\"tint\":{\"apply\":false,\"value\":\"#ffffff\"}}},{\"type\":\"fog\",\"options\":{\"scale\":2,\"speed\":1,\"lifetime\":1,\"density\":0.02,\"tint\":{\"apply\":false,\"value\":\"#ffffff\"}}}]);\nFXMASTER.filters.setFilters([{\"type\":\"lightning\",\"options\":{\"frequency\":2000,\"spark_duration\":370,\"brightness\":2}}]);","img":"icons/svg/windmill.svg","author":"c65jKnqbAlyCYTch","scope":"global","folder":null,"sort":0,"ownership":{"default":0,"c65jKnqbAlyCYTch":3},"flags":{},"_stats":{"systemId":"blades-in-the-dark","systemVersion":"4.3","coreVersion":"10.286","createdTime":1664019792302,"modifiedTime":1664024181721,"lastModifiedBy":"c65jKnqbAlyCYTch"},"_id":"h9pEaowubiqrj2UN"}
{"name":"Make Clock","type":"script","scope":"global","author":"c65jKnqbAlyCYTch","img":"systems/eunos-blades/assets/icons/Icon.4_98.png","command":"ChallengeTracker.open(6, 0, {\n  show: false,\n  persist: true\n})","folder":null,"sort":0,"ownership":{"default":0,"c65jKnqbAlyCYTch":3},"flags":{},"_stats":{"systemId":"eunos-blades","systemVersion":"0.1","coreVersion":"10.286","createdTime":1664023536500,"modifiedTime":1664705549437,"lastModifiedBy":"c65jKnqbAlyCYTch"},"_id":"hNQNxB9BvjYENc44"}
{"type":"script","name":"Particle & Filter Effects","command":"Hooks.call('fxmaster.updateParticleEffects', [{\"type\":\"fog\",\"options\":{\"scale\":2.8,\"speed\":1,\"lifetime\":1,\"density\":0.01,\"tint\":{\"apply\":false,\"value\":\"#ffffff\"}}},{\"type\":\"rain\",\"options\":{\"scale\":1,\"direction\":75,\"speed\":1,\"lifetime\":1,\"density\":0.5,\"tint\":{\"apply\":false,\"value\":\"#ffffff\"}}},{\"type\":\"crows\",\"options\":{\"scale\":3,\"speed\":1,\"lifetime\":1,\"density\":0.001,\"tint\":{\"apply\":false,\"value\":\"#ffffff\"}}}]);\nFXMASTER.filters.setFilters([{\"type\":\"lightning\",\"options\":{\"frequency\":2000,\"spark_duration\":300,\"brightness\":2.7}}]);","img":"icons/svg/windmill.svg","author":"c65jKnqbAlyCYTch","scope":"global","folder":null,"sort":0,"ownership":{"default":0,"c65jKnqbAlyCYTch":3},"flags":{},"_stats":{"systemId":"eunos-blades","systemVersion":"0.1","coreVersion":"10.286","createdTime":1664541100519,"modifiedTime":1664541100519,"lastModifiedBy":"c65jKnqbAlyCYTch"},"_id":"hb6SPml7amNBcTBf"}
{"name":"Filter","type":"script","author":"c65jKnqbAlyCYTch","img":"https://assets.forge-vtt.com/bazaar/core/icons/svg/blood.svg","scope":"global","command":"FXMASTER.filters.switch(\n  \"myFilterID\",\n  \"color\",\n  {color: {value: \"FF0000\", apply: true}}\n);","folder":null,"sort":0,"flags":{"core":{"sourceId":"Compendium.fxmaster.fxmaster.WagOPvrNeOicuBhH"}},"ownership":{"default":0,"c65jKnqbAlyCYTch":3},"_stats":{"systemId":"blades-in-the-dark","systemVersion":"4.3","coreVersion":"10.286","createdTime":1664019019528,"modifiedTime":1664019047995,"lastModifiedBy":"c65jKnqbAlyCYTch"},"_id":"tInlu3eMCB9Z8I5Q"}
{"type":"script","name":"Particle & Filter Effects","command":"Hooks.call('fxmaster.updateParticleEffects', [{\"type\":\"raintop\",\"options\":{\"scale\":1,\"speed\":1,\"lifetime\":1,\"density\":0.3,\"tint\":{\"apply\":false,\"value\":\"#ffffff\"}}},{\"type\":\"crows\",\"options\":{\"scale\":2,\"speed\":1,\"lifetime\":3,\"density\":0.001,\"tint\":{\"apply\":false,\"value\":\"#ffffff\"}}}]);\nFXMASTER.filters.setFilters([{\"type\":\"fog\",\"options\":{\"dimensions\":1,\"speed\":5,\"density\":0.15,\"color\":{\"apply\":false,\"value\":\"#7a3700\"}}},{\"type\":\"lightning\",\"options\":{\"frequency\":1500,\"spark_duration\":370,\"brightness\":2}},{\"type\":\"bloom\",\"options\":{\"blur\":2,\"bloomScale\":0.5,\"threshold\":0.5}}]);","img":"icons/svg/windmill.svg","author":"c65jKnqbAlyCYTch","scope":"global","folder":null,"sort":0,"ownership":{"default":0,"c65jKnqbAlyCYTch":3},"flags":{},"_stats":{"systemId":"blades-in-the-dark","systemVersion":"4.3","coreVersion":"10.286","createdTime":1664036163103,"modifiedTime":1664036163103,"lastModifiedBy":"c65jKnqbAlyCYTch"},"_id":"vRL8LnGaehorgwz0"}
{"name":"Energy Strands","type":"script","author":"c65jKnqbAlyCYTch","img":"modules/JB2A_DnD5e/Library/Generic/Marker/EnergyStrands_01_Regular_Blue_Thumb.webp","scope":"global","command":"let selectedTokens = canvas.tokens.controlled;//for targeted tokens instead, use Array.from(game.user.targets);\nlet effectColor = \"blue\";\n// You can change the color by replacing \"Dark_Red\" by \"Regular_PinkYellow\" for example.\n//Click the Sequencer Database button to see all available colors.\nlet effectScale = 0.25; // this serves as a multiplier for the size of the effect.\nlet tokenSize; // here, we define this variable that we will calculate inside the following loop, for each selected token\n//let's create a loop that will apply the effect on each selected token.\nfor(let selectedToken of selectedTokens){\n    tokenSize = (selectedToken.data.width + selectedToken.data.height) /2;\n    new Sequence() \n        .effect()\n            .attachTo(selectedToken)\n            .file(`jb2a.energy_strands.complete.${effectColor}.01`)\n            .belowTokens()//by default, the effect would be played above the tokens, we want this one to be played underneath so we can place the overlay above it\n            .scale(effectScale * tokenSize)\n            .persist()//This will make it contiously loop until dismissed by another macro (see below) or by pressing the Sequencer Effects Viewer button.\n            .name(\"EnergyStrand\")//Could be anything. This name will make it easier to delete it via macro (see commented macro below)\n        .effect()\n            .attachTo(selectedToken)\n            .file(`jb2a.energy_strands.overlay.${effectColor}.01`)\n            .scale(effectScale * tokenSize)\n            .persist()\n            .name(\"EnergyStrand\")//Named it the same so we can dismiss both at the same time\n          .play();\n}\n      //The text below is commented out. You can copy and paste it in another macro to dismiss the animation. Don't forget to remove the two forward slashes to uncomment it !\n\n      //Sequencer.EffectManager.endEffects({name: \"EnergyStrand\"})","folder":null,"sort":0,"flags":{"core":{"sourceId":"Macro.HkjvnmGTtESQyGBo"}},"ownership":{"BEL3Iav6K058rvXZ":3,"c65jKnqbAlyCYTch":3},"_stats":{"systemId":"eunos-blades","systemVersion":"0.1","coreVersion":"10.286","createdTime":1664280563027,"modifiedTime":1664280563027,"lastModifiedBy":"c65jKnqbAlyCYTch"},"_id":"x2DJNVmm0eDjElld"}
